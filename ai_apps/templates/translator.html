{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Title</title>
	<link rel="stylesheet" href="{% static 'tailwind_app/css/tailwind.css' %}">
</head>
<body>
<div class="h-10 border border-black">
	<h1 class="text-center leading-10 font-bold text-2xl ">翻译</h1>
</div>

<div class="relative border border-red-600">
	<form class="" novalidate>
	{% csrf_token %}
	{% for field in form %}
		<div class="">
			<label for="{{ field.name }}">{{ field.label }}</label>
			{{ field }}
			{{ endfor }}
		</div>
	{% endfor %}

	<button id="translateBtn"
			class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded"
			type="button">
		翻译
	</button>
</form>
</div>

<script src="{% static 'staticfiles_for_project/js/jquery.js' %}"></script>
<script src="{% static 'staticfiles_for_project/js/csrf.js' %}"></script>

<script>
    $(function () {
        btnClickEvent();
		clearOldTranslation();
    })

    // 按钮点击事件
    function btnClickEvent() {
        $('#translateBtn').click(function () {
            $.ajax({
                url: '{% url 'translate' %}',
                type: 'POST',
                data: $('form').serialize(),
                dataType: 'JSON',
                success: function (res) {
                    console.log($('#id_text').serialize());
                    if (res.status) {
						var translation = res.data.translation
						$('#id_translation').val(translation)

					} else {

					}
                    //
                }
            })
        })
    }
// 当id=id_text的input框的值发生改变时，清空id=id_translation的input框的值
	function clearOldTranslation(){
        $('#id_text').change(function () {
			$('#id_translation').val('')
		})
	}




</script>
</body>
</html>